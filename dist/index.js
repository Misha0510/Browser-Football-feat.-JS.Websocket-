(()=>{var e={520:e=>{e.exports=Object.freeze({PLAYER:{RADIUS:20,MAX_HP:100,SPEED:150,MASS:10,FIRE_COOLDOWN:.25,RED_COLOR:"red",BLUE_COLOR:"blue"},PITCH:{X:1540,Y:840,FULL_X:1600,FULL_Y:900,RADIUS:50,PADDING_WIDTH:10,OUTLINE_WIDTH:20,GOAL_WIDTH:220,COLOR:"green",CANVAS_BACKGROUND_COLOR:"white",OUTLINE_COLOR:"red",CENTRAL_CIRCLE_RADIUS:160},BALL:{MASS:5,RADIUS:7,COLOR:"white"},SERVER_PING:33,MSG_TYPES:{JOIN_GAME:"join_game",GAME_UPDATE:"update",INPUT:"input",MOUSE_INPUT:"mouse",GAME_OVER:"dead",PING:"ping"}})}},t={};function n(o){var c=t[o];if(void 0!==c)return c.exports;var I=t[o]={exports:{}};return e[o](I,I.exports,n),I.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};(()=>{"use strict";n.d(o,{m:()=>m,me:()=>y});var e,t,c,I,i,r=n(520);function T(t){var n=Math.atan2(t.clientX*I-y.x,t.clientY*i-y.y);e.innerHTML=t.clientX+" X "+t.clientY,function(e){socket.emit(r.MSG_TYPES.MOUSE_INPUT,e)}(n)}function a(e){var t={x:-e,y:0};socket.emit(r.MSG_TYPES.INPUT,t)}function l(e){var t={x:e,y:0};socket.emit(r.MSG_TYPES.INPUT,t)}function d(e){var t={x:0,y:-e};socket.emit(r.MSG_TYPES.INPUT,t)}var s={KeyW:{pressed:!1,func:d},KeyS:{pressed:!1,func:function(e){var t={x:0,y:e};socket.emit(r.MSG_TYPES.INPUT,t)}},KeyD:{pressed:!1,func:l},KeyA:{pressed:!1,func:a}};document.addEventListener("keydown",(function(e){s[e.code]?s[e.code].pressed=!0:console.log(e.code)})),document.addEventListener("keyup",(function(e){s[e.code]&&(s[e.code].pressed=!1)}));var P,u=n(520),E=document.getElementById("canvas"),L={y1:(u.PITCH.Y-u.PITCH.GOAL_WIDTH)/2+u.PITCH.OUTLINE_WIDTH+u.PITCH.PADDING_WIDTH,y2:u.PITCH.GOAL_WIDTH,x11:u.PITCH.PADDING_WIDTH,x12:u.PITCH.OUTLINE_WIDTH,x21:u.PITCH.X+u.PITCH.OUTLINE_WIDTH+u.PITCH.PADDING_WIDTH,x22:u.PITCH.OUTLINE_WIDTH};function _(e,t,n,o,c,I,i,r){if(void 0===r&&(r=!0),void 0===I&&(I=5),"number"==typeof I)I={tl:I,tr:I,br:I,bl:I};else{var T={tl:0,tr:0,br:0,bl:0};for(var a in T)I[a]=I[a]||T[a]}e.beginPath(),e.moveTo(t+I.tl,n),e.lineTo(t+o-I.tr,n),e.quadraticCurveTo(t+o,n,t+o,n+I.tr),e.lineTo(t+o,n+c-I.br),e.quadraticCurveTo(t+o,n+c,t+o-I.br,n+c),e.lineTo(t+I.bl,n+c),e.quadraticCurveTo(t,n+c,t,n+c-I.bl),e.lineTo(t,n+I.tl),e.quadraticCurveTo(t,n,t+I.tl,n),e.closePath(),i&&e.fill(),r&&e.stroke()}function C(e,t,n,o,c,I,i){e.beginPath(),e.arc(t,n,o,0,2*Math.PI,!1),c&&(e.fillStyle=c,e.fill()),I&&(e.lineWidth=i,e.strokeStyle=I,e.stroke())}function H(){P.clearRect(0,0,E.width,E.height),P.fillStyle=u.PITCH.OUTLINE_COLOR,_(P,u.PITCH.PADDING_WIDTH,u.PITCH.PADDING_WIDTH,u.PITCH.X+2*u.PITCH.OUTLINE_WIDTH,u.PITCH.Y+2*u.PITCH.OUTLINE_WIDTH,u.PITCH.RADIUS,!0,!1),P.fillStyle=u.PITCH.COLOR,_(P,u.PITCH.PADDING_WIDTH+u.PITCH.OUTLINE_WIDTH,u.PITCH.PADDING_WIDTH+u.PITCH.OUTLINE_WIDTH,u.PITCH.X,u.PITCH.Y,u.PITCH.RADIUS,!0,!1),P.beginPath(),P.arc(u.PITCH.FULL_X/2,u.PITCH.FULL_Y/2,u.PITCH.CENTRAL_CIRCLE_RADIUS,0,2*Math.PI,!0),P.stroke(),P.clearRect(L.x11,L.y1,L.x12,L.y2),P.clearRect(L.x21,L.y1,L.x22,L.y2),C(P,m.ball.x,m.ball.y,u.BALL.RADIUS,u.BALL.COLOR,"black",1),m.players.forEach((function(e){C(P,e.x,e.y,u.PLAYER.RADIUS,1==e.team?u.PLAYER.BLUE_COLOR:u.PLAYER.RED_COLOR,"red",1)}))}var D,m,y,O=n(520),A=document.getElementById("ping"),f=document.getElementById("nickname_form"),S=document.getElementById("start_game_button"),v=(document.getElementById("body"),document.createElement("table"),document.createElement("tbody"),!1);socket.on(O.MSG_TYPES.PING,(function(e){v=!0,A.innerHTML="Ping: "+(Date.now()-e)+" ms"})),socket.on(O.MSG_TYPES.GAME_UPDATE,(function(e){m=e,e.players.forEach((function(e){if(e.socket!=socket.id);else{var t={x:e.x,y:e.y};y=t}})),requestAnimationFrame(H)})),document.getElementById("start_game_button").addEventListener("click",(function(){f.style.display="none",S.style.display="none",canvas.style.background="grey",document.addEventListener("keypress",(function(e){"KeyS"===e.code||"KeyW"===e.code?d(10):"KeyA"===e.code?a(10):"KeyD"===e.code&&l(10)}),!1),e=document.getElementById("mouse"),document.addEventListener("mousemove",T),t=document.documentElement.clientWidth,c=document.documentElement.clientHeight,I=r.PITCH.FULL_X/t,i=r.PITCH.FULL_Y/c,console.log(t+" x "+c),console.log(I+" R "+i),setInterval((function(){Object.keys(s).forEach((function(e){s[e].pressed&&s[e].func(10)}))}),50),(P=E.getContext("2d")).canvas.width=1600,P.canvas.height=900,console.log("Game screen inicializated: "+P.canvas.width+"x"+P.canvas.height),D=f.value,socket.emit(O.MSG_TYPES.JOIN_GAME,D)}),!1),socket.on("ping",(function(e){v=!0,A.innerHTML="Ping: "+(Date.now()-e)+" ms"})),setInterval((function(){v=!1,socket.emit("ping",Date.now()),v||(A.innerHTML="Connection lost")}),500)})()})();