(()=>{var e={520:e=>{e.exports=Object.freeze({PLAYER:{RADIUS:10,MAX_HP:100,SPEED:150,MASS:10,FIRE_COOLDOWN:.25,RED_COLOR:"red",BLUE_COLOR:"blue"},PITCH:{X:1540,Y:840,FULL_X:1600,FULL_Y:900,RADIUS:50,PADDING_WIDTH:10,OUTLINE_WIDTH:20,GOAL_WIDTH:220,COLOR:"green",CANVAS_BACKGROUND_COLOR:"white",OUTLINE_COLOR:"red",CENTRAL_CIRCLE_RADIUS:160},BALL:{MASS:1,RADIUS:7,COLOR:"white"},SERVER_PING:33,MSG_TYPES:{JOIN_GAME:"join_game",GAME_UPDATE:"update",INPUT:"input",MOUSE_INPUT:"mouse",GAME_OVER:"dead",PING:"ping"}})}},t={};function n(o){var c=t[o];if(void 0!==c)return c.exports;var I=t[o]={exports:{}};return e[o](I,I.exports,n),I.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};(()=>{"use strict";n.d(o,{m:()=>D,me:()=>m});var e,t,c,I,r=n(520);function i(e){var t;t=Math.atan2(e.clientX*c-m.x,e.clientY*I-m.y),socket.emit(r.MSG_TYPES.MOUSE_INPUT,t)}function T(e){var t={x:-e,y:0};socket.emit(r.MSG_TYPES.INPUT,t)}function a(e){var t={x:e,y:0};socket.emit(r.MSG_TYPES.INPUT,t)}function d(e){var t={x:0,y:-e};socket.emit(r.MSG_TYPES.INPUT,t)}var l={KeyW:{pressed:!1,func:d},KeyS:{pressed:!1,func:function(e){var t={x:0,y:e};socket.emit(r.MSG_TYPES.INPUT,t)}},KeyD:{pressed:!1,func:a},KeyA:{pressed:!1,func:T}};document.addEventListener("keydown",(function(e){l[e.code]?l[e.code].pressed=!0:console.log(e.code)})),document.addEventListener("keyup",(function(e){l[e.code]&&(l[e.code].pressed=!1)}));var s,P=n(520),u=document.getElementById("canvas"),E={y1:(P.PITCH.Y-P.PITCH.GOAL_WIDTH)/2+P.PITCH.OUTLINE_WIDTH+P.PITCH.PADDING_WIDTH,y2:P.PITCH.GOAL_WIDTH,x11:P.PITCH.PADDING_WIDTH,x12:P.PITCH.OUTLINE_WIDTH,x21:P.PITCH.X+P.PITCH.OUTLINE_WIDTH+P.PITCH.PADDING_WIDTH,x22:P.PITCH.OUTLINE_WIDTH};function _(e,t,n,o,c,I,r,i){if(void 0===i&&(i=!0),void 0===I&&(I=5),"number"==typeof I)I={tl:I,tr:I,br:I,bl:I};else{var T={tl:0,tr:0,br:0,bl:0};for(var a in T)I[a]=I[a]||T[a]}e.beginPath(),e.moveTo(t+I.tl,n),e.lineTo(t+o-I.tr,n),e.quadraticCurveTo(t+o,n,t+o,n+I.tr),e.lineTo(t+o,n+c-I.br),e.quadraticCurveTo(t+o,n+c,t+o-I.br,n+c),e.lineTo(t+I.bl,n+c),e.quadraticCurveTo(t,n+c,t,n+c-I.bl),e.lineTo(t,n+I.tl),e.quadraticCurveTo(t,n,t+I.tl,n),e.closePath(),r&&e.fill(),i&&e.stroke()}function L(e,t,n,o,c,I,r){e.beginPath(),e.arc(t,n,o,0,2*Math.PI,!1),c&&(e.fillStyle=c,e.fill()),I&&(e.lineWidth=r,e.strokeStyle=I,e.stroke())}function C(){s.clearRect(0,0,u.width,u.height),s.fillStyle=P.PITCH.OUTLINE_COLOR,_(s,P.PITCH.PADDING_WIDTH,P.PITCH.PADDING_WIDTH,P.PITCH.X+2*P.PITCH.OUTLINE_WIDTH,P.PITCH.Y+2*P.PITCH.OUTLINE_WIDTH,P.PITCH.RADIUS,!0,!1),s.fillStyle=P.PITCH.COLOR,_(s,P.PITCH.PADDING_WIDTH+P.PITCH.OUTLINE_WIDTH,P.PITCH.PADDING_WIDTH+P.PITCH.OUTLINE_WIDTH,P.PITCH.X,P.PITCH.Y,P.PITCH.RADIUS,!0,!1),s.beginPath(),s.arc(P.PITCH.FULL_X/2,P.PITCH.FULL_Y/2,P.PITCH.CENTRAL_CIRCLE_RADIUS,0,2*Math.PI,!0),s.stroke(),s.clearRect(E.x11,E.y1,E.x12,E.y2),s.clearRect(E.x21,E.y1,E.x22,E.y2),L(s,D.ball.x,D.ball.y,P.BALL.RADIUS,P.BALL.COLOR,"black",1),D.players.forEach((function(e){L(s,e.x,e.y,P.PLAYER.RADIUS,1==e.team?P.PLAYER.BLUE_COLOR:P.PLAYER.RED_COLOR,"red",1)}))}var H,D,m,y=n(520),O=document.getElementById("ping"),A=document.getElementById("nickname_form"),f=document.getElementById("start_game_button"),S=(document.getElementById("body"),document.createElement("table"),document.createElement("tbody"),!1);socket.on(y.MSG_TYPES.PING,(function(e){S=!0,O.innerHTML="Ping: "+(Date.now()-e)+" ms"})),socket.on(y.MSG_TYPES.GAME_UPDATE,(function(e){D=e,e.players.forEach((function(e){if(e.socket!=socket.id);else{var t={x:e.x,y:e.y};m=t}})),requestAnimationFrame(C)})),document.getElementById("start_game_button").addEventListener("click",(function(){A.style.display="none",f.style.display="none",canvas.style.background="grey",document.addEventListener("keypress",(function(e){"KeyS"===e.code||"KeyW"===e.code?d(10):"KeyA"===e.code?T(10):"KeyD"===e.code&&a(10)}),!1),document.getElementById("mouse"),document.addEventListener("mousemove",i),e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,c=r.PITCH.FULL_X/e,I=r.PITCH.FULL_Y/t,console.log(e+" x "+t),console.log(c+" R "+I),setInterval((function(){Object.keys(l).forEach((function(e){l[e].pressed&&l[e].func(10)}))}),50),(s=u.getContext("2d")).canvas.width=1600,s.canvas.height=900,console.log("Game screen inicializated: "+s.canvas.width+"x"+s.canvas.height),H=A.value,socket.emit(y.MSG_TYPES.JOIN_GAME,H)}),!1),socket.on("ping",(function(e){S=!0,O.innerHTML="Ping: "+(Date.now()-e)+" ms"})),setInterval((function(){S=!1,socket.emit("ping",Date.now()),S||(O.innerHTML="Connection lost")}),500)})()})();