(()=>{var e={520:e=>{var t;function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=Object.freeze((n(t={PLAYER_RADIUS:20,PLAYER_MAX_HP:100,PLAYER_SPEED:4,PLAYER_FIRE_COOLDOWN:.25,PLAYER:{RED_COLOR:"red",BLUE_COLOR:"blue"},BULLET_RADIUS:3,BULLET_SPEED:800,BULLET_DAMAGE:10,SCORE_BULLET_HIT:20,SCORE_PER_SECOND:1,PITCH:{X:1540,Y:840,FULL_X:1600,FULL_Y:900,RADIUS:50,PADDING_WIDTH:10,OUTLINE_WIDTH:20,GOAL_WIDTH:220,COLOR:"green",CANVAS_BACKGROUND_COLOR:"white",OUTLINE_COLOR:"red",CENTRAL_CIRCLE_RADIUS:160},BALL:{MASS:50,RADIUS:7,COLOR:"white"}},"PLAYER_RADIUS",10),n(t,"SERVER_PING",10),n(t,"MSG_TYPES",{JOIN_GAME:"join_game",GAME_UPDATE:"update",INPUT:"input",MOUSE_INPUT:"mouse",GAME_OVER:"dead",PING:"ping"}),t))}},t={};function n(o){var c=t[o];if(void 0!==c)return c.exports;var I=t[o]={exports:{}};return e[o](I,I.exports,n),I.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};(()=>{"use strict";n.d(o,{m:()=>L,me:()=>u});var e=n(520);function t(t){console.log(t.clientX+" "+u.x+" "+t.clientY+" "+u.y);var n=Math.atan2(t.clientX-u.x,t.clientY-u.y);!function(t){socket.emit(e.MSG_TYPES.MOUSE_INPUT,t)}(n),console.log(n)}function c(t){var n={x:-t,y:0};socket.emit(e.MSG_TYPES.INPUT,n)}function I(t){var n={x:t,y:0};socket.emit(e.MSG_TYPES.INPUT,n)}function r(t){var n={x:0,y:-t};socket.emit(e.MSG_TYPES.INPUT,n)}var i={KeyW:{pressed:!1,func:r},KeyS:{pressed:!1,func:function(t){var n={x:0,y:t};socket.emit(e.MSG_TYPES.INPUT,n)}},KeyD:{pressed:!1,func:I},KeyA:{pressed:!1,func:c}};document.addEventListener("keydown",(function(e){i[e.code]?i[e.code].pressed=!0:console.log(e.code)})),document.addEventListener("keyup",(function(e){i[e.code]&&(i[e.code].pressed=!1)}));var T,a=n(520),P=document.getElementById("canvas"),l={y1:(a.PITCH.Y-a.PITCH.GOAL_WIDTH)/2+a.PITCH.OUTLINE_WIDTH+a.PITCH.PADDING_WIDTH,y2:a.PITCH.GOAL_WIDTH,x11:a.PITCH.PADDING_WIDTH,x12:a.PITCH.OUTLINE_WIDTH,x21:a.PITCH.X+a.PITCH.OUTLINE_WIDTH+a.PITCH.PADDING_WIDTH,x22:a.PITCH.OUTLINE_WIDTH};function E(e,t,n,o,c,I,r,i){if(void 0===i&&(i=!0),void 0===I&&(I=5),"number"==typeof I)I={tl:I,tr:I,br:I,bl:I};else{var T={tl:0,tr:0,br:0,bl:0};for(var a in T)I[a]=I[a]||T[a]}e.beginPath(),e.moveTo(t+I.tl,n),e.lineTo(t+o-I.tr,n),e.quadraticCurveTo(t+o,n,t+o,n+I.tr),e.lineTo(t+o,n+c-I.br),e.quadraticCurveTo(t+o,n+c,t+o-I.br,n+c),e.lineTo(t+I.bl,n+c),e.quadraticCurveTo(t,n+c,t,n+c-I.bl),e.lineTo(t,n+I.tl),e.quadraticCurveTo(t,n,t+I.tl,n),e.closePath(),r&&e.fill(),i&&e.stroke()}function s(e,t,n,o,c,I,r){e.beginPath(),e.arc(t,n,o,0,2*Math.PI,!1),c&&(e.fillStyle=c,e.fill()),I&&(e.lineWidth=r,e.strokeStyle=I,e.stroke())}function d(){T.clearRect(0,0,P.width,P.height),T.fillStyle=a.PITCH.OUTLINE_COLOR,E(T,a.PITCH.PADDING_WIDTH,a.PITCH.PADDING_WIDTH,a.PITCH.X+2*a.PITCH.OUTLINE_WIDTH,a.PITCH.Y+2*a.PITCH.OUTLINE_WIDTH,a.PITCH.RADIUS,!0,!1),T.fillStyle=a.PITCH.COLOR,E(T,a.PITCH.PADDING_WIDTH+a.PITCH.OUTLINE_WIDTH,a.PITCH.PADDING_WIDTH+a.PITCH.OUTLINE_WIDTH,a.PITCH.X,a.PITCH.Y,a.PITCH.RADIUS,!0,!1),T.beginPath(),T.arc(a.PITCH.FULL_X/2,a.PITCH.FULL_Y/2,a.PITCH.CENTRAL_CIRCLE_RADIUS,0,2*Math.PI,!0),T.stroke(),T.clearRect(l.x11,l.y1,l.x12,l.y2),T.clearRect(l.x21,l.y1,l.x22,l.y2),s(T,L.ball.x,L.ball.y,a.BALL.RADIUS,a.BALL.COLOR,"black",1),L.players.forEach((function(e){s(T,e.x,e.y,a.PLAYER_RADIUS,1==e.team?a.PLAYER.BLUE_COLOR:a.PLAYER.RED_COLOR,"red",1)}))}var _,L,u,D=n(520),C=document.getElementById("ping"),H=document.getElementById("nickname_form"),y=document.getElementById("start_game_button"),O=(document.getElementById("body"),document.createElement("table"),document.createElement("tbody"),!1);socket.on(D.MSG_TYPES.PING,(function(e){O=!0,C.innerHTML="Ping: "+(Date.now()-e)+" ms"})),socket.on(D.MSG_TYPES.GAME_UPDATE,(function(e){L=e,e.players.forEach((function(e){if(e.socket!=socket.id);else{var t={x:e.x,y:e.y};u=t}})),requestAnimationFrame(d)})),document.getElementById("start_game_button").addEventListener("click",(function(){H.style.display="none",y.style.display="none",canvas.style.background="grey",document.addEventListener("keypress",(function(e){"KeyS"===e.code||"KeyW"===e.code?r(10):"KeyA"===e.code?c(10):"KeyD"===e.code&&I(10)}),!1),document.getElementById("mouse"),document.addEventListener("mousemove",t),setInterval((function(){Object.keys(i).forEach((function(e){i[e].pressed&&i[e].func(10)}))}),50),(T=P.getContext("2d")).canvas.width=1600,T.canvas.height=900,console.log("Game screen inicializated: "+T.canvas.width+"x"+T.canvas.height),_=H.value,socket.emit(D.MSG_TYPES.JOIN_GAME,_)}),!1),socket.on("ping",(function(e){O=!0,C.innerHTML="Ping: "+(Date.now()-e)+" ms"})),setInterval((function(){O=!1,socket.emit("ping",Date.now()),O||(C.innerHTML="Connection lost")}),500)})()})();